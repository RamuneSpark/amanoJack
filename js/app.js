let txtFontLoad=[],txtFontLoadList=["Makinas-4-Flat","Makinas-4-Square","FGMediumHankaku","NotoSansJP-Medium"],font={};for(let t=0;t<txtFontLoadList.length;t++)txtFontLoad[t]=document.createElement("p"),txtFontLoad[t].style.fontFamily=txtFontLoadList[t],txtFontLoad[t].textContent="アマノ弱",font[txtFontLoadList[t]]=txtFontLoad[t].style.fontFamily;function createDiv(t,e){var n,o=document.createElement("div");return o.id=t,document.body.appendChild(o),"img"===e&&(n=document.createElement("img"),o.appendChild(n),n.id=t+"-@-IMG",n.style.display="none"),"txt"===e&&((n=document.createElement("span")).classList.add("mainTxt"),n.id=t+"-@-SPAN",o.appendChild(n)),o}function img(t){t=t.id;return document.getElementById(t+"-@-IMG")}function span(t){t=t.id;return document.getElementById(t+"-@-SPAN")}function setImage(t,e){""===e?Remove(t):("block"!==(t=img(t)).style.display&&(t.style.display="block"),!1===t.src.endsWith(e)&&(t.src=e))}function setText(t,e){t=span(t);t&&t.innerHTML!=="<nobr>"+e+"</nobr>"&&(t.innerHTML="<nobr>"+e+"</nobr>")}function Remove(t){var e=img(t),t=span(t);null!==e&&(e.style.display="none",e.src=""),null!==t&&(t.innerHTML="")}function putXY(t,e,n){"no"!==e&&(isNaN(e)?t.style.left=e:t.style.left=e+"px"),"no"!==n&&(isNaN(n)?t.style.top=n:t.style.top=n+"px")}function putXY2(t,e){putXY(t,e.x,e.y)}let Center="-50%",Left="0%",Top=Left,Right="-100%",Bottom=Right;function transform(t,e,n,o=0,i=1,s=1,a=1){let r="translate("+e+", "+n+")";0!==o&&(r+="rotate("+o+"deg)"),1!==i&&(r+="scale("+i+")"),1===s&&1===a||(r+="scaleX("+s+") scaleY("+a+")"),t.style.transform=r}function Rb(t){let e=t;return e=(e=(e=(e=e.replace(/\[/g,"<ruby>")).replace(/\]/g,"</ruby>")).replace(/\(/g,"<rt>")).replace(/\)/g,"</rt>")}function Rb2(t){let e=t;return e=(e=(e=(e=e.replace(/\[/g,"<ruby>")).replace(/\]/g,"</ruby>")).replace(/\{/g,"<rt>")).replace(/\}/g,"</rt>")}function fontSet(t,e,n,o,i,s){"green"===e?e="#BFFFB0":"blue"===e?e="#AFD0FF":"red"===e&&(e="#FFC6BB"),t.style.color!==e&&(t.style.color=e),t.style.fontFamily!==n&&(t.style.fontFamily=n),t.style.fontSize!==o&&(isNaN(o)?t.style.fontSize=o:t.style.fontSize=o+"px"),t.style.fontWeight!==i&&(t.style.fontWeight=i),t.style.textAlign!==s&&(t.style.textAlign=s)}function fontColorSet(t,e){"green"==e?e="#BFFFB0":"blue"==e?e="#AFD0FF":"red"==e&&(e="#FFC6BB"),t.style.color!==e&&(t.style.color=e)}function textEdge(t,o,i){if(0!==o){"green"==i?i="#17890B":"blue"==i?i="#012DD4":"red"==i&&(i="#CE2807");let n="";for(let e=0;e<16;e++)for(let t=1;t<=2;t++){var s=2*Math.PI*(e/16),a=Math.cos(s)*(t/2)*o,s=Math.sin(s)*(t/2)*o;1===t&&0===e||(n+=","),n+=a+"px "+s+"px 0px "+i}t.style.textShadow!==n&&(t.style.textShadow=n)}else 0===o&&""!==t.style.textShadow&&(t.style.textShadow="")}let allDiv=[];function defaultSet(t,e){e.appendChild(t),allDiv.push(t),t.style.position="absolute",t.querySelectorAll("img").forEach(t=>{t.addEventListener("dragstart",function(t){t.preventDefault()})})}let phone,os;function phoneCheck(){os=navigator.userAgent.match(/iPhone|iPad|Android.+Mobile|Android/)?(phone=!0,navigator.userAgent.match(/iPhone|iPad/)?"iOS":"others"):(phone=!1,"others")}function Vector([t,e],[n,o]){var i={},n=n-t,t=o-e,o=n*n+t*t;return 0==(o=Math.sqrt(o))?(i.x=0,i.xLength=0,i.y=1,i.yLength=0,i.z=1):(i.x=n/o,i.xLength=n,i.y=t/o,i.yLength=t,i.z=o),i}function VectorWay([t,e],[n,o]){n-=t,t=o-e;let i;return Math.abs(t)>Math.abs(n)?i=0<=t?"down":"up":Math.abs(t)<Math.abs(n)?i=0<n?"right":"left":((i=["diagonal"])[1]=0<=t?"down":"up",i[2]=0<n?"right":"left"),console.log(i),i}function touchElement(t,e){var n=[];let o=!1,i=!1,s=!1;return n[1]=t.getBoundingClientRect(),n[2]=e.getBoundingClientRect(),n[1].top<n[2].top&&(n[2]=t.getBoundingClientRect(),n[1]=e.getBoundingClientRect()),n[2].bottom>n[1].top&&(o=!0),n[1]=t.getBoundingClientRect(),n[2]=e.getBoundingClientRect(),n[2].left<n[1].left&&(n[2]=t.getBoundingClientRect(),n[1]=e.getBoundingClientRect()),n[1].right>n[2].left&&(i=!0),s=!(!i||!o)}function touchElement2(t,e){var n=[],o=touchElement(t,e);let i=!1;n[1]=t.getBoundingClientRect(),n[2]=e.getBoundingClientRect();t=[,{},{}];return o&&(t[1].y=(n[1].top+n[1].bottom)/2,t[2].y=(n[2].top+n[2].bottom)/2,t[1].x=(n[1].left+n[1].right)/2,t[2].x=(n[2].left+n[2].right)/2,i=VectorWay([t[2].x,t[2].y],[t[1].x,t[1].y])),i}function touch(t,e){let n=0;t.addEventListener("touchstart",function(t){return t.preventDefault(),n=1,sw2Check||e(),!1}),t.addEventListener("mousedown",function(t){return t.preventDefault(),sw2Check||(0===n&&e(),n=0),!1})}function mod(t,e){return(t%e+e)%e}function lerp(t,e,n){n=(n[1]-e[1])/(n[0]-e[0]);return n*t+(e[1]-n*e[0])}function sw2(t,o=null,i=-1,s=null,e=!0){sw2Check=!0;let n=e?"animate__backInLeft":"animate__backInRight";Swal.fire({showClass:{popup:"animate__animated "+n+" animate__faster"},hideClass:{popup:"animate__animated animate__fadeOutDown animate__faster"},target:screen,...t}).then(t=>{let e;var n=Swal.getPopup();n.classList.remove("animate__fadeOutDown"),t.isConfirmed?e="animate__backOutRight":t.isDismissed&&(e="animate__fadeOutDown"),n.classList.add(e),null!==s&&s(t),-1===i&&(i=200),null!==o?setTimeout(()=>{sw2Check=!1,o(t)},i):sw2Check=!1})}phoneCheck();let sw2Check=!1;function animation(t,e,n){return t.k++,e<=t.k&&(t.p++,t.k=0),t.p%=n,t}let screen=createDiv("screen","img"),scene,nextScene=void 0,bs=101,shift=0,screenOpacity=0,bo_speed=.15,bo_time=0;function blackout(){99===(bs=void 0!==nextScene&&0===bs?99:bs)?(screenOpacity-=bo_speed)<=0&&(screenOpacity=0,bs=100):100===bs?(screenOpacity-=bo_speed)<=0&&(screenOpacity=0,bs=101):101===Math.abs(bs)?++bo_time/2>=fps/8/2&&(bo_time=0,bs=101===bs?(scene=nextScene,shift=0,RemoveAll(),-101):-100):-100==bs?bs=-99:-99==bs&&1<=(screenOpacity+=bo_speed)&&(screenOpacity=1,bs=0,nextScene=void 0),screen.style.opacity=screenOpacity}let sWidth=540,sHeight=960,windowWidth=window.visualViewport.width,windowHeight=window.visualViewport.height,screenScale=100,screenInitialize=!1;function monitorResize(){phoneCheck(),windowWidth=window.visualViewport.width,windowHeight=window.visualViewport.height,windowWidth/windowHeight<sWidth/sHeight?screenScale=windowWidth/sWidth:windowWidth/windowHeight>=sWidth/sHeight&&(screenScale=windowHeight/sHeight),transform(screen,Center,Center,0,screenScale),screenInitialize||(screen.style.width=sWidth+"px",screen.style.height=sHeight+"px",gameScreen.style.width=sWidth+"px",gameScreen.style.height=sHeight+"px",screenInitialize=!0)}window.addEventListener("resize",monitorResize);let audioContext=new AudioContext,audioData={},sound=[],gain=[],soundName=[];for(let t=0;t<32;t++)sound[t]=null,gain[t]=null,soundName[t]=void 0;function soundPlayer(){for(let t=0;t<32;t++)void 0!==soundName[t]&&(soundSet(t),soundName[t]=void 0)}function soundPaused(t){return null===t||t.customStop}function soundPlay(e,n,o,i,s=0,a=0){if(1<=soundOp){sound[e]&&(sound[e].stop(),sound[e].disconnect(),sound[e]=null);let t=audioContext.createBufferSource();t.customTag=Math.floor(1e13*Math.random());var r=audioContext.createGain();t.buffer=audioData[i],r.gain.value=n,(t.loop=o)&&(t.loopStart=a,0!==s)&&(t.loopEnd=s),t.connect(r),r.connect(audioContext.destination),t.start(),t.customStop=!1,sound[e]=t,gain[e]=r.gain,setTimeout(()=>{null!==gain[e]&&t.customTag===sound[e].customTag&&(gain[e].value=n)},10),sound[e].onended=()=>{sound[e].customStop=!0}}}function soundSet(t){null!==sound[t]&&"play"==soundName[t]?(sound[t].resume(),sound[t].customStop=!1):null!==sound[t]&&"stop"==soundName[t]&&(sound[t].stop(),sound[t].customStop=!0),bs<=0&&("confirm"===soundName[t]?soundPlay(t,1.3,!1,soundName[t]):"select"===soundName[t]?soundPlay(t,1.4,!1,soundName[t]):"back"===soundName[t]?soundPlay(t,1.8,!1,soundName[t]):"ok"===soundName[t]?soundPlay(t,.76,!1,soundName[t]):"miss"===soundName[t]?soundPlay(t,.94,!1,soundName[t]):"pause"===soundName[t]?soundPlay(t,1.2,!1,soundName[t]):"finish"===soundName[t]?soundPlay(t,1.5,!1,soundName[t]):"answer"===soundName[t]?soundPlay(t,.6,!1,soundName[t]):"allClear"===soundName[t]?soundPlay(t,2.8,!1,soundName[t]):"pageShift"===soundName[t]?soundPlay(t,.9,!1,soundName[t]):"count"===soundName[t]?soundPlay(t,.6,!1,soundName[t]):"bgm"===soundName[t]&&2===soundOp?soundPlay(t,1,!0,soundName[t],36,2.4):"result"===soundName[t]&&2===soundOp&&soundPlay(t,1.1,!0,soundName[t],31.2,2.4))}let loadSoundName=["confirm","select","back","ok","miss","pause","finish","answer","allClear","pageShift","count","bgm","result"];async function loadSound(){for(let t=0;t<loadSoundName.length;t++){var e=loadSoundName[t],n=await(await fetch("sound/"+e+".ogg")).arrayBuffer();audioData[e]=await audioContext.decodeAudioData(n)}}loadSound();let fps=50,fps2=1e3/fps,moveInterval=null,now=(setTimeout(()=>{monitorResize(),moveInterval=setInterval(move,fps2)},500),null);function errorTimeCheck(){var t;"game"!==subScene||1===pause||null===now||(t=new Date,Math.abs(t.getTime()-now.getTime())<=2500)?now=new Date:(clearInterval(moveInterval),window.location.reload())}function move(){errorTimeCheck(),"check"===scene?resultBackCheck||(resultBackCheck=!0,resultBackAlert()):run(),blackout(),soundPlayer()}function display(){}change_level=.1,k2ndTime=40,k3rdTime=8;let div_bg=createDiv("bg","img"),div_test=(defaultSet(div_bg,screen),putXY(div_bg,"50%","50%"),transform(div_bg,Center,Center),div_bg.style.zIndex=-1,setImage(div_bg,""),createDiv("test","img")),div_scoreTxt=(defaultSet(div_test,screen),putXY(div_test,110,50),transform(div_test,Center,Center,0,1),div_test.style.zIndex=1001,setImage(div_test,""),createDiv("scoreTxt","txt")),div_score=(defaultSet(div_scoreTxt,screen),putXY(div_scoreTxt,"60%","100%"),transform(div_scoreTxt,Right,Bottom),fontSet(div_scoreTxt,"#C6F5C9",font["Makinas-4-Square"],"40","bold","right"),textEdge(div_scoreTxt,4,"#2D8D7F"),div_scoreTxt.style.zIndex=5e3,setText(div_scoreTxt,""),createDiv("score","txt")),score=(defaultSet(div_score,screen),putXY(div_score,"98%","100%"),transform(div_score,Right,Bottom),fontSet(div_score,"#C6F5C9",font.FGMediumHankaku,"52","normal","right"),textEdge(div_score,4,"#2D8D7F"),div_score.style.zIndex=5e3,setText(div_score,""),0),div_time=createDiv("time","txt"),logo=(defaultSet(div_time,screen),putXY(div_time,"10%","100%"),transform(div_time,Center,Bottom),fontSet(div_time,"#C6F2F5",font.FGMediumHankaku,"55","normal","right"),textEdge(div_time,4,"#2D568D"),div_time.style.zIndex=5e3,setText(div_time,""),[]),div_logo=[];for(let n=0;n<4;n++){logo[n]={m:0,y:34,time:0,opacity:0,rotate:0,yTheta:0,vec:1};let t=[96,180,265,352],e=[104,104,104,82];div_logo[n]=createDiv("logo"+n,"img"),defaultSet(div_logo[n],screen),putXY(div_logo[n],"50%","30%"),transform(div_logo[n],Center,Center),div_logo[n].style.zIndex=100,div_logo[n].style.transformOrigin=t[n]+"px "+e[n]+"px",div_logo[n].style.mixBlendMode="normal",setImage(div_logo[n],"")}let div_pause=createDiv("pause","txt"),subScene=(defaultSet(div_pause,screen),putXY(div_pause,"50%","50%"),transform(div_pause,Center,Center),fontSet(div_pause,"#D89FAA",font["Makinas-4-Square"],"60","bold","right"),textEdge(div_pause,4,"#94395B"),div_pause.style.zIndex=5e3,setText(div_pause,""),"title"),firstTime=[60*fps,70*fps,80*fps],time=70*fps,scoreY=100,pause=0,pauseScaleX=0,hiSound=!1;function gameStart(){pause=0,time=firstTime[level],score=0,gameShift=0,gameShiftTime=0,stageScaleTheta=0,soundName[5]="bgm",hiMemory=!1,setting()}function eraseTitle(){UI_button[3].m=0,UI_button[4].m=0,UI_button[5].m=0,UI_button[6].m=0,UI_button[7].m=0,UI_button[8].m=0,UI_button[9].m=0,eraseSNS(),Remove(div_soundOnOff);for(let t=0;t<4;t++)logo[t]={m:0,y:34,time:0,opacity:0,rotate:0,yTheta:0,vec:1},Remove(div_logo[t]);Remove(div_levelTxtTitle),Remove(div_copyRight),Remove(div_Hi),Remove(div_HiTxt)}function scoreDisplay(t){let e=t;return e<10?e="0"+e:9990<e&&(e="9990"),e}let gameScreen=document.createElement("div"),scoreCenter=(gameScreen.id="gameScreen",screen.appendChild(gameScreen),gameScreen.style.position="absolute",putXY(gameScreen,"50%","50%"),transform(gameScreen,Center,Center),gameScreen.style.zIndex=0,gameScreen.style.opacity=1,{m:0,t:"",x:740,c:"p",time:0,i:0}),div_scoreCenter=createDiv("scoreCenter","txt"),handStyleName=(defaultSet(div_scoreCenter,gameScreen),transform(div_scoreCenter,Center,Center),fontSet(div_scoreCenter,"#C6F5C9",font.FGMediumHankaku,"52","normal","right"),textEdge(div_scoreCenter,4,"#2D8D7F"),div_scoreCenter.style.zIndex=5e3,div_scoreCenter.style.pointerEvents="none",setText(div_scoreCenter,""),["normal","right","left"]),handStyleDefault=0,handStyle=handStyleDefault;function handStyleChange(){handStyle++,handStyle%=handStyleName.length,saveData.hand=handStyle,soundName[1]="select";for(let t=0;t<buttonMax[level];t++)button[t].x=setPos(t).x,button[t].y=setPos(t).y;save()}let div_button=[],div_char=[],div_mark=[],div_load=[],button=[],frame=[],panelSprite=[2,4,4,2,4,4,4,2,2,2,4,4,2],panelSpeed=[8,10,15,10,10,6,10,10,15,18,14,8,9],allType=13,buttonMax=[9,15,21],level=1,HiScoreDefault=[300,500,1e3],levelDefault=1,UI_button=[],div_UI_button=[];for(let t=0;t<15;t++)UI_button[t]={m:0,x:0,y:0,tx:Center,ty:Center,index:t,path:"",brightness:1,opacity:1,use:!0},div_UI_button[t]=createDiv("UI_button"+t,"img"),defaultSet(div_UI_button[t],screen),putXY(div_UI_button[t],200,100*t),transform(div_UI_button[t],Center,Center),div_UI_button[t].style.zIndex=10;let etc=0,etcOpacity=0,div_etc=createDiv("etc","other"),div_etc2=(defaultSet(div_etc,screen),putXY(div_etc,"50%","50%"),transform(div_etc,Center,Center),div_etc.style.zIndex=2999,div_etc.style.mixBlendMode="multiply",div_etc.style.backgroundColor="#2A2A3C",createDiv("etc2","other")),div_result=(defaultSet(div_etc2,screen),putXY(div_etc2,"50%","50%"),transform(div_etc2,Center,Center),div_etc2.style.zIndex=3e3,UI_button[0].x="3%",UI_button[0].y="5%",UI_button[0].tx=Left,UI_button[0].ty=Center,createDiv("result","other")),resultOpacity=(defaultSet(div_result,screen),putXY(div_result,"50%","50%"),transform(div_result,Center,Center),div_result.style.zIndex=100,div_result.style.mixBlendMode="multiply",div_result.style.backgroundColor="#2A2A3C",0),div_result2=createDiv("result2","other"),div_resultLine=(defaultSet(div_result2,screen),putXY(div_result2,"50%","50%"),transform(div_result2,Center,Center),div_result2.style.zIndex=100,div_result2.style.mixBlendMode="normal",createDiv("resultLine","other")),resultX=(defaultSet(div_resultLine,div_result2),putXY(div_resultLine,"50%","67%"),transform(div_resultLine,Center,Center),div_resultLine.style.zIndex=100,div_resultLine.style.backgroundColor="#FFFFFF",150),div_resultTxt=createDiv("resultTxt","txt"),div_resultHiTxt=(defaultSet(div_resultTxt,div_result2),putXY(div_resultTxt,"50%","15%"),transform(div_resultTxt,Center,Center),fontSet(div_resultTxt,"#EFD9CA",font["Makinas-4-Square"],"50","bold","right"),textEdge(div_resultTxt,4,"#A84220"),div_resultTxt.style.zIndex=1e3,setText(div_resultTxt,""),createDiv("resultHiTxt","txt")),levelName=(defaultSet(div_resultHiTxt,div_result2),putXY(div_resultHiTxt,"50%","30%"),transform(div_resultHiTxt,Center,Center),fontSet(div_resultHiTxt,"#F6E3E9",font["Makinas-4-Square"],"20","bold","right"),textEdge(div_resultHiTxt,3,"#743245"),div_resultHiTxt.style.zIndex=1e3,setText(div_resultHiTxt,""),["かんたん","ふつう","むずかしい"]),div_levelTxt=createDiv("levelTxt","txt"),div_scoreTxt2=(defaultSet(div_levelTxt,div_result2),putXY(div_levelTxt,"50%","44%"),transform(div_levelTxt,Center,Center),fontSet(div_levelTxt,"#C6F2F5",font["Makinas-4-Flat"],"30","bold","right"),textEdge(div_levelTxt,4,"#2D568D"),div_levelTxt.style.zIndex=1e3,setText(div_levelTxt,""),createDiv("scoreTxt2","txt")),div_score2=(defaultSet(div_scoreTxt2,div_result2),putXY(div_scoreTxt2,"42%","58%"),transform(div_scoreTxt2,Right,Bottom),fontSet(div_scoreTxt2,"#C6F5C9",font["Makinas-4-Square"],"40","bold","right"),textEdge(div_scoreTxt2,4,"#2D8D7F"),div_scoreTxt2.style.zIndex=5e3,setText(div_scoreTxt2,""),createDiv("score2","txt")),hiMemory=(defaultSet(div_score2,div_result2),putXY(div_score2,"80%","58%"),transform(div_score2,Right,Bottom),fontSet(div_score2,"#C6F5C9",font.FGMediumHankaku,"52","normal","right"),textEdge(div_score2,4,"#2D8D7F"),div_score2.style.zIndex=5e3,setText(div_score2,""),!1);function resultDisplay(){putXY(div_result2,resultX+"%","50%"),div_result.style.width="540px",div_result.style.height="660px",div_result2.style.width="540px",div_result2.style.height="660px",div_resultLine.style.width="500px",div_resultLine.style.height="2px",div_result.style.opacity=resultOpacity,hiMemory?(setText(div_resultHiTxt,Rb("[自己(じこ)]ベスト[更新(こうしん)]！")),div_resultHiTxt.style.filter="brightness("+(1+t%2)+")"):div_resultHiTxt.style.filter="none",setText(div_resultTxt,"RESULT"),setText(div_levelTxt,levelName[level]+"モード"),setText(div_scoreTxt2,"スコア"),setText(div_score2,scoreDisplay(score))}function removeResult(){div_result.style.width="0px",div_result.style.height="0px",div_result2.style.width="0px",div_result2.style.height="0px",div_resultLine.style.width="0px",div_resultLine.style.height="0px",Remove(div_resultHiTxt),Remove(div_resultTxt),Remove(div_levelTxt),Remove(div_scoreTxt2),Remove(div_score2)}let div_levelTxtTitle=createDiv("levelTxtTitle","txt"),soundOp=(defaultSet(div_levelTxtTitle,screen),putXY(div_levelTxtTitle,"50%","70%"),transform(div_levelTxtTitle,Center,Center),fontSet(div_levelTxtTitle,"#FFFFFF",font["Makinas-4-Flat"],"30","bold","right"),div_levelTxtTitle.style.zIndex=1e3,setText(div_levelTxtTitle,""),0),soundTh=0,finishTime=0,answerSound=!1,finishX=703.5,div_finish=createDiv("finish","img"),div_soundOnOff=(defaultSet(div_finish,screen),putXY(div_finish,0,"50%"),transform(div_finish,Center,Center),div_finish.style.zIndex=1e3,div_finish.style.mixBlendMode="normal",setImage(div_finish,""),createDiv("soundOnOff","txt")),HiScore=(defaultSet(div_soundOnOff,screen),putXY(div_soundOnOff,"15%","12%"),transform(div_soundOnOff,Left,Center),fontSet(div_soundOnOff,"#FFFFFF",font["Makinas-4-Square"],"30","bold","right"),div_soundOnOff.style.zIndex=1e3,setText(div_soundOnOff,""),[300,500,1e3]),hiScoreHeight="74%",div_HiTxt=createDiv("HiTxt","txt"),div_Hi=(defaultSet(div_HiTxt,screen),putXY(div_HiTxt,"36%",hiScoreHeight),transform(div_HiTxt,Left,Center),fontSet(div_HiTxt,"#FFFFFF",font["Makinas-4-Flat"],"25","bold","right"),div_HiTxt.style.zIndex=1e3,setText(div_HiTxt,""),createDiv("Hi","txt")),div_copyRight=(defaultSet(div_Hi,screen),putXY(div_Hi,"64%",hiScoreHeight),transform(div_Hi,Bottom,Center),fontSet(div_Hi,"#FFFFFF",font["Makinas-4-Flat"],"25","bold","right"),div_Hi.style.zIndex=1e3,setText(div_Hi,""),createDiv("copyRight","txt")),white=(defaultSet(div_copyRight,screen),putXY(div_copyRight,"100%","100%"),transform(div_copyRight,Right,Bottom),fontSet(div_copyRight,"#FFFFFF",font["Makinas-4-Flat"],"22","normal","right"),div_copyRight.style.zIndex=1e3,setText(div_copyRight,""),{m:0,opacity:0}),div_clearWhite=createDiv("clearWhite","other");defaultSet(div_clearWhite,screen),putXY(div_clearWhite,"50%","50%"),transform(div_clearWhite,Center,Center),div_clearWhite.style.zIndex=5e5,div_clearWhite.style.width="0%",div_clearWhite.style.height="0%",div_clearWhite.style.backgroundColor="#FFFFFF";for(let t=0;t<21;t++)button[t]={m:0,x:setPos(t).x,y:setPos(t).y,type:Math.floor(13*Math.random())},div_button[t]=createDiv("button"+t,"img"),defaultSet(div_button[t],gameScreen),putXY(div_button[t],200,100*t),transform(div_button[t],Center,Center,0,2.5),div_button[t].style.zIndex=10,setImage(div_button[t],""),div_char[t]=createDiv("char"+t,"img"),defaultSet(div_char[t],div_button[t]),putXY(div_char[t],"50%","50%"),transform(div_char[t],Center,Center),div_char[t].style.zIndex=15,div_mark[t]=createDiv("mark"+t,"img"),defaultSet(div_mark[t],div_button[t]),putXY(div_mark[t],"50%","50%"),transform(div_mark[t],Center,Center),div_mark[t].style.zIndex=20;for(let t=0;t<allType;t++)div_load[t]=createDiv("load"+t,"img"),defaultSet(div_load[t],screen),putXY(div_load[t],"10%",t/allType*100+"%"),transform(div_load[t],Center,Center),div_load[t].style.zIndex=-1,div_load[t].style.visibility="hidden";let amanoNumber=0;function setting(){for(let t=0;t<button.length;t++)button[t].m=0;for(let t=0;t<buttonMax[level];t++)button[t].x=setPos(t).x,button[t].y=setPos(t).y;var e=[],n=[],o=[5,8,11];for(let t=0;t<allType;t++)e[t]=t,frame[t]={p:0,k:0};for(let t=0;t<o[level];t++)n[t]=0;for(;;){if(e.length<=o[level])break;var t=Math.floor(Math.random()*e.length);e.splice(t,1)}var i=Math.floor(Math.random()*e.length),s=(amanoNumber=e[i],[]);for(let t=0;t<buttonMax[level];t++)s[t]=t;for(let t=0;t<buttonMax[level];t++){var a=Math.floor(Math.random()*s.length),r=s[a],a=(s.splice(a,1),Math.floor(Math.random()*e.length));n[a]++,button[r].type=e[a],(2<=n[a]||1<=n[a]&&amanoNumber===e[a])&&(e.splice(a,1),n.splice(a,1))}}function setPos(t){let e=100;return 0!==handStyle&&(e=90),{x:sWidth/2+(t%3-1)*e,y:sHeight/2+(Math.floor(t/3)-(level+1))*e}}let gameShift=0,gameShiftTime=0,stageScaleTheta=0,t=0,SNS_button=(setting(),[]),div_SNS_button=[],thisURL="https://ramunespark.github.io/amanoJack/",iconPx=52,shareResult=!1,snsButtonLock=!1,SNS_num=[0,1,2,3,5,6],SNS_bright=[!0,!1,!0,!0,!1,!0,!1],snsMax=6;for(let t=0;t<snsMax;t++)SNS_button[t]={m:0,x:0,y:"80%",tx:Left,ty:Center,index:t,path:"",brightness:1,opacity:1,use:!0},div_SNS_button[t]=createDiv("SNS_button"+t,"img"),defaultSet(div_SNS_button[t],screen),putXY(div_SNS_button[t],200,100*t),transform(div_SNS_button[t],Left,Top),div_SNS_button[t].style.zIndex=100,div_SNS_button[t].style.width=iconPx+"px",div_SNS_button[t].style.height=iconPx+"px",img(div_SNS_button[t]).style.transform="scale("+.01*iconPx+")",img(div_SNS_button[t]).style.transformOrigin="top left";function snsButtonDisplay(){var e=(sWidth-iconPx*snsMax)/(snsMax+1);e<iconPx/2&&console.log("no way!!");for(let t=0;t<snsMax;t++)0===t&&shareResult?SNS_button[t].path=img_shareCopy.src:SNS_button[t].path=img_SNS[SNS_num[t]].src,SNS_button[t].m=1,SNS_button[t].x=e*(t+1)+iconPx*t}function eraseSNS(){for(let t=0;t<snsMax;t++)SNS_button[t].m=0}function shareTxt(t=!0){let e;var n;return e=shareResult?(n=["","自己ベスト更新！"],"仲間外れのパネルを次々に見つけよう！\n『アマノ弱』（アマノジャック）\n\n"+levelName[level]+"モード で"+n[Number(hiMemory)]+"\n"+scoreDisplay(score)+"点 獲得しました！\n\n"+thisURL):"仲間外れのパネルを次々に見つけよう！\n『アマノ弱』（アマノジャック）\n"+thisURL,t&&(e+="\n\n#アマノ弱 #ブラウザゲーム"),e}function share(t){0===SNS_num[t]?shareResult?copyText(shareTxt()):navigator.share?navigator.share({title:"アマノ弱（アマノジャック）",url:thisURL,text:shareTxt(!1)}).then(()=>{console.log("シェアします！")}).catch(()=>{alertShare()}):(alertShare(),console.log("navigator.share === false")):1===SNS_num[t]?urlJump(blueskyShare(shareTxt())):2===SNS_num[t]?urlJump(twitterShare(shareTxt())):3===SNS_num[t]?urlJump(misskeyShare(shareTxt())):5===SNS_num[t]?urlJump(taittsuShare(shareTxt())):6===SNS_num[t]&&urlJump(lineShare(shareTxt(!1)))}function blueskyShare(t){return"https://bsky.app/intent/compose?text="+encodeURIComponent(t)}function twitterShare(t){return"https://x.com/intent/post?text="+encodeURIComponent(t)}function misskeyShare(t){return"https://misskeyshare.link/share.html?text="+encodeURIComponent(t)}function taittsuShare(t){return"https://taittsuu.com/share?text="+encodeURIComponent(t)}function lineShare(t){return"https://line.me/R/share?text="+encodeURIComponent(t)}function urlJump(t){"iOS"===os?window.location.href=t:window.open(t,"_blank")}function alertShare(){sw2({title:Rb("エラー"),html:Rb("シェア[機能(きのう)]の[利用(りよう)]に[失敗(しっぱい)]しました。<br><br>・[時間(じかん)]をおいてからブラウザをリロードしたり、[再起動(さいきどう)]したりすると[改善(かいぜん)]する[可能性(かのうせい)]があります。<br>・OSやブラウザなど、[環境(かんきょう)]によっては[正(ただ)]しく[機能(きのう)]しない[場合(ばあい)]があります。"),confirmButtonText:"OK",confirmButtonColor:"#257EC9",allowOutsideClick:!1,customClass:{popup:"sw2_pop",title:"sw2_titleNormal",htmlContainer:"sw2_normal",confirmButton:"sw2_button",cancelButton:"sw2_button"}},t=>{soundName[0]="confirm"},0)}function alertCopy(){sw2({title:Rb("エラー"),html:Rb("クリップボードへのコピーに[失敗(しっぱい)]しました。<br><br>・[時間(じかん)]をおいてからブラウザをリロードしたり、[再起動(さいきどう)]したりすると[改善(かいぜん)]する[可能性(かのうせい)]があります。<br>・OSやブラウザなど、[環境(かんきょう)]によっては[正(ただ)]しく[機能(きのう)]しない[場合(ばあい)]があります。"),confirmButtonText:"OK",confirmButtonColor:"#257EC9",allowOutsideClick:!1,customClass:{popup:"sw2_pop",title:"sw2_titleNormal",htmlContainer:"sw2_normal",confirmButton:"sw2_button",cancelButton:"sw2_button"}},t=>{soundName[0]="confirm"},0)}function OKCopy(){sw2({title:Rb("クリップボードにコピー"),html:Rb("クリップボードに[結果(けっか)]をコピーしました。"),confirmButtonText:"OK",confirmButtonColor:"#257EC9",allowOutsideClick:!1,customClass:{popup:"sw2_pop",title:"sw2_titleNormal",htmlContainer:"sw2_normal",confirmButton:"sw2_button",cancelButton:"sw2_button"}},t=>{soundName[0]="confirm"},0)}function copyText(t){navigator.clipboard&&window.ClipboardItem?(t=new Blob([t],{type:"text/plain"}),t=new ClipboardItem({"text/plain":t}),navigator.clipboard.write([t]).then(()=>{OKCopy()},()=>{alertCopy()})):alertCopy()}let page=0;function manual(t=!0){let e=createDiv("manualPage","txt"),n=["ゲームルール","アドバイス","セーブについて"];var o=["ゲームのルールは[非常(ひじょう)]にシンプルです。<br>2[枚(まい)]1[組(くみ)]になってアニメーションしているパネルが[表示(ひょうじ)]されますが、1つだけ[孤立(こりつ)]した[天邪鬼(あまのじゃく)]なパネルがあります。<br>それを[見(み)]つけてクリック/タップしてください。<br><br>[時間(じかん)][内(ない)]により[多(おお)]くクリアして、[高得点(こうとくてん)]を[目指(めざ)]しましょう。",`・[間(ま)][違(ちが)]えるとタイムとスコアが[減(へ)]ってしまいますが、×マークが[表示(ひょうじ)]されてヒントになります。すぐに[分(わ)]からず[長時間(ちょうじかん)]かかりそうなときは、うまく[活用(かつよう)]するのも[一手(いって)]かもしれません。<br><br>・アニメーションの[種類(しゅるい)]によって、スピードも[決(き)]まっています。[色(いろ)]んな[情報(じょうほう)]を[参考(さんこう)]にしてください。<br><br>※[残(のこ
        )]りタイムが10[秒(びょう)][以下(いか)]の[場合(ばあい)]は、[間(ま)][違(ちが)]えてもタイムは[減(へ)]りません。また、スコアについても0[点(てん)]は[下(した)][回(まわ)]らない[仕様(しよう)]となります。`,"このゲームでは、ローカルストレージに[難易度(なんいど)][別(べつ)]のハイスコアが[自動(じどう)][的(てき)]に[保存(ほぞん)]されます（サーバーには[保存(ほぞん)]されません）。<br>[他(ほか)]のブラウザに[引(ひ)]き[継(つ)]いだり、[外部(がいぶ)]にバックアップしたりする[手段(しゅだん)]は[用意(ようい)]しておりませんので、[予(あらかじ)]めご[了承(りょうしょう)]ください。<br><br>[消去(しょうきょ)]したい[場合(ばあい)]はタイトル[画面(がめん)]にて「エトセトラ」→「データ[消去(しょうきょ)]」を[選択(せんたく)]し、[赤(あか)]いバーが[最大(さいだい)]になるまで[待機(たいき)]してから[画面(がめん)]の[指示(しじ)]に[従(したが)]ってください。"];let i='[次{つぎ}]のページへ <span style="display:inline-block;transform:rotate(90deg)">▲</span>',s='<span style="display:inline-block;transform:rotate(270deg)">▲</span> [戻{もど}]る';0===page&&(s="[閉{と}じる]"),page===n.length-1&&(i="タイトル[画面{がめん}]へ");let a={};1===[1,1,0][page]&&(a={imageUrl:img_howTo[page].src}),sw2({title:Rb(n[page]),html:Rb(o[page]),showCancelButton:!0,confirmButtonText:Rb2(i),cancelButtonText:Rb2(s),confirmButtonColor:"#257EC9",cancelButtonColor:"#FF4274",allowOutsideClick:!1,reverseButtons:!0,didOpen:()=>{defaultSet(e,Swal.getPopup()),putXY(e,"99%","99%"),transform(e,Right,Bottom),fontSet(e,"#FFFFFF",font["NotoSansJP-Medium"],"1em","normal","right"),setText(e,page+1+" / "+n.length)},didClose:()=>{e.remove()},...a,customClass:{popup:"sw2_pop",title:"sw2_titleNormal",htmlContainer:"sw2_normal",confirmButton:"sw2_button",cancelButton:"sw2_button"}},t=>{t.isConfirmed?++page<n.length&&manual():0<=--page&&manual(!1)},-1,t=>{var e=Swal.getPopup();t.isConfirmed?soundName[0]="confirm":(soundName[0]="back",e.classList.remove("animate__fadeOutDown"),e.classList.add("animate__backOutLeft"))},t)}function licenseList(t=!0){var e=`<span style = "font-size:0.8em">Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:
<br><br>
The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.
<br><br>
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</span>`;let n=createDiv("page","txt");let o=["The MIT License (MIT)<br>Copyright (c) 2009-2013 Jeff Mott<br>Copyright (c) 2013-2016 Evan Vosberg<br><br>"+e,"The MIT License (MIT)<br>Copyright (c) 2014 Tristan Edwards & Limon Monte<br><br>"+e,"The MIT License (MIT)<br>Copyright (c) 2020 Daniel Eden<br><br>"+e];let i='[次{つぎ}]のページへ <span style="display:inline-block;transform:rotate(90deg)">▲</span>',s='<span style="display:inline-block;transform:rotate(270deg)">▲</span> [戻{もど}]る';0===page&&(s="[閉{と}じる]"),page===o.length-1&&(i="[終{お}わる]"),sw2({title:`<span style="font-family:${font["Makinas-4-Flat"]}">`+["crypto-js","SweetAlert2","Animate.css"][page]+"<span>",html:Rb2(o[page]),showCancelButton:!0,confirmButtonText:Rb2(i),cancelButtonText:Rb2(s),confirmButtonColor:"#257EC9",cancelButtonColor:"#FF4274",allowOutsideClick:!1,reverseButtons:!0,didOpen:()=>{defaultSet(n,Swal.getPopup()),putXY(n,"99%","99%"),transform(n,Right,Bottom),fontSet(n,"#FFFFFF",font["NotoSansJP-Medium"],"1em","normal","right"),setText(n,page+1+" / "+o.length)},didClose:()=>{n.remove()},customClass:{popup:"sw2_pop",title:"sw2_titleNormal",htmlContainer:"sw2_normal",confirmButton:"sw2_button",cancelButton:"sw2_button"}},t=>{t.isConfirmed?++page<o.length&&licenseList():0<=--page&&licenseList(!1)},-1,t=>{var e=Swal.getPopup();t.isConfirmed?soundName[0]="confirm":(soundName[0]="back",e.classList.remove("animate__fadeOutDown"),e.classList.add("animate__backOutLeft"))},t)}function run(){if(t++,"left"===handStyleName[handStyle]?putXY(gameScreen,"30%","50%"):"right"===handStyleName[handStyle]?putXY(gameScreen,"70%","50%"):"normal"===handStyleName[handStyle]&&putXY(gameScreen,"50%","50%"),0===pause&&"title"!==subScene)for(let t=0;t<allType;t++)frame[t]=animation(frame[t],panelSpeed[t],panelSprite[t]);if(0!==bs||0!==gameShift&&3!==gameShift||(stageScaleTheta+=Math.PI/2*.1,0===gameShift&&stageScaleTheta>=Math.PI/2?(stageScaleTheta=Math.PI/2,gameShift=1):3===gameShift&&stageScaleTheta>=Math.PI&&(stageScaleTheta=0,gameShift=0,setting())),0===bs&&0===pause&&1===gameShift&&0<time&&-1!==buttonSelect){var e=buttonSelect;if(gameShiftTime<=0&&0===button[e].m)if(button[e].m=1,button[e].type!==amanoNumber){soundName[3]="miss";for(let t=0;t<buttonMax[level];t++)e!==t&&button[e].type===button[t].type&&(button[t].m=1);var n=[50,70,70];score-=n[level],scoreCenter.m=1,scoreCenter.i=e,scoreCenter.c="m",scoreCenter.t="-"+n[level],score<0&&(score=0),10<Math.ceil(time/fps)&&(time-=3*fps)}else{soundName[2]="ok",gameShift=2,gameShiftTime=0;n=[60,150,240];score+=n[level],scoreCenter.m=1,scoreCenter.i=e,scoreCenter.c="p",scoreCenter.t="+"+n[level]}}if(2===gameShift?++gameShiftTime>fps&&(gameShift=3,gameShiftTime=0,soundName[8]="pageShift"):1===gameShift&&--gameShiftTime<=0&&(gameShiftTime=0),"title"!==subScene&&"titleToGame"!==subScene)for(let e=0;e<button.length;e++)e<buttonMax[level]?(finishX<=-563.5&&"answer"===subScene&&amanoNumber===button[e].type&&(button[e].m=1,answerSound||(soundName[5]="answer",answerSound=!0)),1===button[e].m?(amanoNumber===button[e].type?setImage(div_mark[e],img_panelOK.src):setImage(div_mark[e],img_panelMiss.src),div_mark[e].style.opacity=t%2):Remove(div_mark[e]),putXY(div_button[e],button[e].x,button[e].y),setImage(div_button[e],img_panel.src),setImage(div_char[e],img_char[button[e].type][frame[button[e].type].p].src)):(Remove(div_button[e]),Remove(div_char[e]),Remove(div_mark[e]));if(1===gameShift&&0<gameShiftTime?gameScreen.style.opacity=.7:gameScreen.style.opacity=1,0===pause?(0===bs&&"game"===subScene&&(1===gameShift&&(time--,Math.ceil(time/fps)<=10)&&0<Math.ceil(time/fps)&&time%fps==0&&(soundName[9]="count"),time<=0)&&(time=0,UI_button[7].m=0,subScene="answer",answerSound=!1,soundName[5]="finish"),1<=(pauseScaleX+=.2)&&(pauseScaleX=1)):1===pause&&(pauseScaleX-=.2)<=0&&(pauseScaleX=0),transform(gameScreen,Center,Center,0,1,Math.sin(stageScaleTheta)*pauseScaleX),"title"===subScene){0===logo[0].m&&0===bs&&(logo[0].m=1),snsButtonDisplay();for(let t=0;t<4;t++){var o,i;1===logo[t].m?(logo[t].time++,logo[t].rotate=0,logo[t].opacity+=.1,1<=logo[t].opacity&&(logo[t].opacity=1,logo[t].m=2,logo[t].time=Math.floor(Math.random()*fps*5)+4*fps),logo[t].y=30+3*(1-logo[t].opacity)):2===logo[t].m&&0===t?(logo[t].time--,logo[t].time<=0&&(logo[t].time=Math.floor(Math.random()*fps*5)+4*fps,o=Math.floor(3*Math.random()),i=[-1,1],logo[t].vec=i[Math.floor(Math.random()*i.length)],2===logo[o].m)&&(-1===logo[t].vec&&(logo[t].rotate=360),logo[o].m=3)):3===logo[t].m&&(logo[t].rotate+=360/(.7*fps)*logo[t].vec,360<=logo[t].rotate&&1===logo[t].vec||logo[t].rotate<=0&&-1===logo[t].vec)&&(logo[t].rotate=0,logo[t].m=2),0<t&&0===logo[t].m&&(3<=logo[t-1].time&&1===logo[t-1].m||2<=logo[t-1].m)&&(logo[t].m=1),putXY(div_logo[t],"50%",logo[t].y+"%"),div_logo[t].style.opacity=logo[t].opacity,transform(div_logo[t],Center,Center,logo[t].rotate),setImage(div_logo[t],img_logo[t].src)}UI_button[3].m=1,UI_button[3].x="50%",UI_button[3].y="60%",UI_button[3].path=img_startButton.src,UI_button[8].m=1,UI_button[8].x="50%",UI_button[8].y="52%",UI_button[8].path=img_howToButton.src,UI_button[9].m=1,UI_button[9].x="1%",UI_button[9].tx="0%",UI_button[9].y="12%",UI_button[9].ty="-50%",UI_button[9].path=img_sound_button.src,UI_button[4].m=1,UI_button[4].x="15%",UI_button[4].y="72%",UI_button[4].path=img_left_button.src,UI_button[5].m=1,UI_button[5].x="85%",UI_button[5].y="72%",UI_button[5].path=img_right_button.src,UI_button[6].m=1,UI_button[6].x="75%",UI_button[6].y="92%",UI_button[6].path=img_etcButton.src,UI_button[7].m=1,UI_button[7].x="99%",UI_button[7].tx="-100%",UI_button[7].y="12%",UI_button[7].ty="-50%",UI_button[7].path=img_handButton[handStyle].src,putXY(div_soundOnOff,"15%","12%"),soundTh+=2*Math.PI*(1/fps),1===soundOp?(div_soundOnOff.style.opacity=1,fontColorSet(div_soundOnOff,"#C6F5C9"),textEdge(div_soundOnOff,4,"#2D8D7F"),setText(div_soundOnOff,"SEのみ")):2===soundOp?(div_soundOnOff.style.opacity=1,setText(div_soundOnOff,"SE + BGM"),fontColorSet(div_soundOnOff,"#F5C6CE"),textEdge(div_soundOnOff,4,"#94395B")):(div_soundOnOff.style.opacity=.5,fontColorSet(div_soundOnOff,"#9CDBED"),textEdge(div_soundOnOff,4,"#224B7C"),setText(div_soundOnOff,"OFF")),3===uiSelect&&(subScene="titleToGame",shift=0,soundName[0]="confirm"),9===uiSelect&&(soundOp=mod(++soundOp,3)),4===uiSelect?(soundName[1]="select",level--,saveData.level=level,save()):5===uiSelect&&(soundName[1]="select",level++,saveData.level=level,save()),7===uiSelect&&handStyleChange(),8===uiSelect&&(page=0,manual(),soundName[0]="confirm"),6===uiSelect&&0===etc&&(soundName[0]="confirm",etc=1,etcOpacity=0,div_etc2.appendChild(div_UI_button[10]),div_etc2.appendChild(div_UI_button[11]),div_etc2.appendChild(div_UI_button[12]),div_etc2.appendChild(div_UI_button[13]),div_etc2.appendChild(div_UI_button[14])),1===etc?(etcOpacity+=.1,div_etc.style.width=sWidth+"px",div_etc2.style.width=sWidth+"px",div_etc.style.height=sHeight+"px",div_etc2.style.height=sHeight+"px",UI_button[10].use=!1,UI_button[11].use=!1,UI_button[12].use=!1,UI_button[13].use=!1,UI_button[14].use=!1,1<=etcOpacity&&(etcOpacity=1,etc=2),UI_button[10].m=1,UI_button[10].x="50%",UI_button[10].y="35%",UI_button[10].path=img_homePageButton.src,UI_button[11].m=1,UI_button[11].x="50%",UI_button[11].y="45%",UI_button[11].path=img_creditButton.src,UI_button[12].m=1,UI_button[12].x="50%",UI_button[12].y="55%",UI_button[12].path=img_licenseButton.src,UI_button[13].m=1,UI_button[13].x="50%",UI_button[13].y="65%",UI_button[13].path=img_clearButton.src,UI_button[14].m=1,UI_button[14].x="80%",UI_button[14].y="25%",UI_button[14].path=img_backButton.src):2===etc?(UI_button[10].use=!0,UI_button[11].use=!0,UI_button[12].use=!0,UI_button[13].use=!0,UI_button[14].use=!0,14===uiSelect?(etc=3,soundName[0]="back"):10===uiSelect?(soundName[0]="confirm",etc=3,setTimeout(()=>{urlJump("https://ramunespark.github.io/")},500)):11===uiSelect?(soundName[0]="confirm",sw2({title:"クレジット",html:'メインプログラム<br>イラスト・ピクセルアート<br>UIデザイン<br>ミュージックコンポーザー<br>サウンドFX<br>プラン・ディレクション<br><br><span style="color:#FFFF00">・ラムネ</span>',confirmButtonText:Rb2("[閉{と}じる]"),confirmButtonColor:"#257EC9",allowOutsideClick:!1,customClass:{popup:"sw2_pop",title:"sw2_titleNormal",htmlContainer:"sw2_normal",confirmButton:"sw2_button",cancelButton:"sw2_button"}},t=>{soundName[0]="back"})):12===uiSelect?(soundName[0]="confirm",page=0,licenseList()):13===uiSelect&&(etc=3,eraseAlert())):3===etc&&(etcOpacity-=.1,UI_button[10].use=!1,UI_button[11].use=!1,UI_button[12].use=!1,UI_button[13].use=!1,UI_button[14].use=!1,etcOpacity<=0)&&(div_etc.style.width="0px",div_etc2.style.width="0px",div_etc.style.height="0px",div_etc2.style.height="0px",screen.appendChild(div_UI_button[10]),screen.appendChild(div_UI_button[11]),screen.appendChild(div_UI_button[12]),screen.appendChild(div_UI_button[13]),screen.appendChild(div_UI_button[14]),UI_button[10].m=0,UI_button[11].m=0,UI_button[12].m=0,UI_button[13].m=0,UI_button[14].m=0,UI_button[10].use=!0,UI_button[11].use=!0,UI_button[12].use=!0,UI_button[13].use=!0,UI_button[14].use=!0,etcOpacity=0,etc=0),div_etc.style.opacity=etcOpacity,div_etc2.style.opacity=etcOpacity,level=mod(level,levelName.length),setText(div_HiTxt,"Hi -"),setText(div_Hi,scoreDisplay(HiScore[level])),setText(div_levelTxtTitle,levelName[level]),setText(div_copyRight,"&copy;2025　RAMUNE SPARK")}if("titleToGame"===subScene){let e=0;for(let t=0;t<4;t++)logo[t].opacity-=.1,logo[t].opacity<=0&&(logo[t].opacity=0,e++),div_logo[t].style.opacity=logo[t].opacity;4<=e&&(0===shift&&eraseTitle(),shift++),shift>=fps&&(gameStart(),subScene="game",shift=0)}if(0!==bs||"game"!==subScene&&"answer"!==subScene?100<=(scoreY+=20)&&(scoreY=100):((scoreY-=20)<=-100&&(scoreY=-100),setText(div_scoreTxt,"スコア"),setText(div_score,scoreDisplay(score)),Math.ceil(time/fps)<=10?(fontSet(div_time,"#F5C6C6",font.FGMediumHankaku,"75","normal","right"),textEdge(div_time,4,"#8D2D2D")):(fontSet(div_time,"#C6F2F5",font.FGMediumHankaku,"55","normal","right"),textEdge(div_time,4,"#2D568D")),setText(div_time,scoreDisplay(Math.ceil(time/fps)))),0===bs&&"answer"===subScene&&(shift++,finishX-=40,finishTime<=.8*fps&&finishX<=270&&(finishTime++,finishX=270),finishX<=-563.5&&(finishX=-563.5),putXY(div_finish,finishX,"50%"),setImage(div_finish,img_finish.src),shift>=3.5*fps)&&finishX<=-263.5){shift=0,finishTime=0,finishX=703.5,score>HiScore[level]&&(HiScore[level]=score,saveData.hi=JSON.parse(JSON.stringify(HiScore)),hiMemory=!0),resultSave(),save(),Remove(div_finish);for(let t=0;t<snsMax;t++)div_result2.appendChild(div_SNS_button[t]),SNS_button[t].use=!1,SNS_button[t].y="87%";shareResult=!0,snsButtonDisplay(),subScene="result",soundName[5]="result",hiSound=!1,UI_button[1].use=!1,UI_button[2].use=!1,div_result2.appendChild(div_UI_button[1]),div_result2.appendChild(div_UI_button[2]),resultOpacity=0,resultX=150}if(0===bs&&"game"===subScene?(UI_button[0].m=1,UI_button[0].path=img_pause.src,UI_button[0].opacity=.5,UI_button[7].m=1,UI_button[7].x="99%",UI_button[7].tx="-100%",UI_button[7].y="5%",UI_button[7].ty="-50%",UI_button[7].path=img_handButton[handStyle].src,7===uiSelect&&handStyleChange(),1===gameShift?(UI_button[0].use=!0,UI_button[0].opacity=1):(UI_button[0].use=!1,UI_button[0].opacity=.3),0===uiSelect&&(soundName[4]="pause",(0===(pause^=1)?eraseSNS:snsButtonDisplay)())):UI_button[0].m=0,"game"===subScene&&1===pause?(setText(div_pause,"PAUSE !"),div_pause.style.opacity=Math.floor(t/(fps/2))%2):Remove(div_pause),0===pause&&(1===scoreCenter.m&&(scoreCenter.m=2,scoreCenter.x=640,scoreCenter.time=0),2===scoreCenter.m?(scoreCenter.x-=60,scoreCenter.x<=setPos(scoreCenter.i).x&&scoreCenter.time<=fps/2&&(scoreCenter.x=setPos(scoreCenter.i).x,scoreCenter.time++),div_scoreCenter.style.filter="brightness("+(1+t%2)+")",putXY(div_scoreCenter,scoreCenter.x,setPos(scoreCenter.i).y),setText(div_scoreCenter,scoreCenter.t),"p"===scoreCenter.c?(fontSet(div_scoreCenter,"#C6F5C9",font.FGMediumHankaku,"52","normal","right"),textEdge(div_scoreCenter,4,"#2D8D7F")):"m"===scoreCenter.c&&(fontSet(div_scoreCenter,"#F5C6CE",font.FGMediumHankaku,"52","normal","right"),textEdge(div_scoreCenter,4,"#94395B")),scoreCenter.x<=-100&&(scoreCenter.m=0)):Remove(div_scoreCenter)),transform(div_scoreTxt,Right,scoreY+"%"),transform(div_score,Right,scoreY+"%"),transform(div_time,Center,scoreY+"%"),"result"===subScene){if(1<=(resultOpacity+=.1)&&(resultOpacity=1),(resultX-=5)<=50){resultX=50,UI_button[1].use=!0,UI_button[2].use=!0,hiMemory&&!hiSound&&(soundName[2]="ok",hiSound=!0);for(let t=0;t<snsMax;t++)SNS_button[t].use=!0}for(let t=0;t<2;t++){var s=[1,2][t],a=[25,75];UI_button[s].m=1,UI_button[s].x=a[t]+"%",UI_button[s].y="75%",UI_button[s].path=img_end_button[t].src}if(1===uiSelect){shareResult=!1,saveData.result.on=!1,save(),subScene="retryReady",soundName[0]="confirm";for(let t=0;t<snsMax;t++)SNS_button[t].use=!1}else if(2===uiSelect){shareResult=!1,saveData.result.on=!1,save(),subScene="titleReady",soundName[0]="confirm";for(let t=0;t<snsMax;t++)SNS_button[t].use=!1;soundName[5]="stop"}resultDisplay()}if("retryReady"===subScene||"titleReady"===subScene){if((resultOpacity-=.1)<=0&&(resultOpacity=0),(resultX-=5)<=-50){resultX=-50,UI_button[1].m=0,UI_button[2].m=0,eraseSNS();for(let t=0;t<snsMax;t++)screen.appendChild(div_SNS_button[t]),SNS_button[t].use=!0,SNS_button[t].y="80%";screen.appendChild(div_UI_button[1]),screen.appendChild(div_UI_button[2])}resultDisplay(),0<stageScaleTheta&&(stageScaleTheta+=Math.PI/2*.1),stageScaleTheta>=Math.PI&&(stageScaleTheta=0),resultOpacity<=0&&resultX<=-50&&0===stageScaleTheta&&(removeResult(),subScene="retryReady"===subScene?(gameStart(),"game"):"title")}setImage(div_bg,img_bg.src),buttonSelect=-1;for(let t=0;t<15;t++){UI_button[t].brightness-=.1;var r=lerp(UI_button[t].brightness,[1,1],[2.5,.3]);UI_button[t].brightness<=1&&(UI_button[t].brightness=1),0===UI_button[t].m?(UI_button[t].brightness=1,Remove(div_UI_button[t])):(div_UI_button[t].style.filter="brightness("+UI_button[t].brightness+")",div_UI_button[t].style.opacity=UI_button[t].opacity*r,putXY(div_UI_button[t],UI_button[t].x,UI_button[t].y),transform(div_UI_button[t],UI_button[t].tx,UI_button[t].ty),setImage(div_UI_button[t],UI_button[t].path))}for(let t=0;t<snsMax;t++){SNS_button[t].brightness-=.1;var l=lerp(SNS_button[t].brightness,[1,1],[2.5,.3]);SNS_button[t].brightness<=1&&(SNS_button[t].brightness=1),0===SNS_button[t].m?(SNS_button[t].brightness=1,Remove(div_SNS_button[t])):(div_SNS_button[t].style.filter="brightness("+SNS_button[t].brightness+")",div_SNS_button[t].style.opacity=SNS_button[t].opacity*l,putXY(div_SNS_button[t],SNS_button[t].x,SNS_button[t].y),setImage(div_SNS_button[t],SNS_button[t].path))}1===white.m&&(white.opacity-=.05,white.opacity<=0&&(white.opacity=0,white.m=2),div_clearWhite.style.width="100%",div_clearWhite.style.height="100%",div_clearWhite.style.opacity=white.opacity),2===white.m&&(white.m=0,div_clearWhite.style.width="0%",div_clearWhite.style.height="0%",div_clearWhite.style.opacity=1),uiSelect=-1}for(let t=0;t<21;t++)touch(div_button[t],()=>{buttonSelect=t});for(let t=0;t<15;t++)touch(div_UI_button[t],()=>{0===bs&&1===UI_button[t].m&&UI_button[t].use&&!snsButtonLock&&(uiSelect=UI_button[t].index,UI_button[t].brightness=2.5)});for(let t=0;t<snsMax;t++)touch(div_SNS_button[t],()=>{0===bs&&1===SNS_button[t].m&&SNS_button[t].use&&!snsButtonLock&&(SNS_bright[SNS_num[t]]&&(SNS_button[t].brightness=2.5),snsButtonLock=!0,soundName[0]="confirm",setTimeout(()=>{snsButtonLock=!1,share(t)},500))});let buttonSelect=-1,uiSelect=-1;function RemoveAll(){allDiv.forEach(t=>{Remove(t)})}document.body.addEventListener("touchmove",t=>{1<t.touches.length&&t.preventDefault()},{passive:!1}),window.oncontextmenu=function(t){return t.stopPropagation(),!1},window.addEventListener("touchstart",function(t){t.target.closest(".swal2-container")||t.preventDefault()},{passive:!1});let saveData=null;function save(){var t=JSON.stringify(saveData),t=CryptoJS.AES.encrypt(t,"43789").toString();localStorage.setItem("amanoJack_data",t)}function eraseData(){localStorage.removeItem("amanoJack_data"),load()}function load(){var t=localStorage.getItem("amanoJack_data");saveData=null!==t?(t=CryptoJS.AES.decrypt(t,"43789").toString(CryptoJS.enc.Utf8),JSON.parse(t)):{hi:JSON.parse(JSON.stringify(HiScoreDefault)),level:levelDefault,hand:handStyleDefault,result:{on:!1,time:null,score:0,hi:!1,sound:0,stage:JSON.parse(JSON.stringify(button)),amanoNumber:0}},HiScore=saveData.hi,level=saveData.level,level=saveData.level,handStyle=saveData.hand,button=JSON.parse(JSON.stringify(saveData.result.stage)),amanoNumber=saveData.result.amanoNumber}function resultSave(){var t=new Date;saveData.result.on=!0,saveData.result.time=t.getTime(),saveData.result.year=t.getFullYear(),saveData.result.month=t.getMonth(),saveData.result.date=t.getDate(),saveData.result.day=t.getDay(),saveData.result.hour=t.getHours(),saveData.result.minute=t.getMinutes(),saveData.result.score=score,saveData.result.hi=hiMemory,saveData.result.sound=soundOp,saveData.result.stage=JSON.parse(JSON.stringify(button)),saveData.result.amanoNumber=amanoNumber}load();let resultBackCheck=!1;function resultBackAlert(){var t=saveData.result;let e=t.date+"[日(にち)]";var n=[];for(let t=1;t<=31;t++)n[t]="null";function o(t){let e=t<10?"0"+t:t;return e}n[1]="ついたち",n[2]="ふつか",n[3]="みっか",n[4]="よっか",n[5]="いつか",n[6]="むいか",n[7]="なのか",n[8]="ようか",n[9]="ここのか",n[10]="とおか",n[14]="じゅうよっか",n[20]="はつか",n[24]="にじゅうよっか","null"!==n[t.date]&&(e="["+t.date+"日("+n[t.date]+")]");var i=t.year+"[年(ねん)]"+(t.month+1)+"[月(がつ)]"+e+"（"+["[日(にち)]","[月(げつ)]","[火(か)]","[水(すい)]","[木(もく)]","[金(きん)]","[土(ど)]"][t.day]+"）",t=o(t.hour)+":"+o(t.minute);sw2({title:Rb("リザルトの[再(さい)][表示(ひょうじ)]"),html:Rb('<span style = "color:#EF95A6;font-weight:bold">'+i+" "+t+"</span><br><br>[上記(じょうき)]の[直近(ちょっきん)]でのプレイ[記録(きろく)]が[残(のこ)]っています。<br>リザルト[画面(がめん)]をもう[一度(いちど)][表示(ひょうじ)]しますか？"),showCancelButton:!0,confirmButtonText:Rb("[表示(ひょうじ)]"),cancelButtonText:"キャンセル",confirmButtonColor:"#257EC9",cancelButtonColor:"#FF4274",allowOutsideClick:!1,reverseButtons:!0,didClose:()=>{},customClass:{popup:"sw2_pop",title:"sw2_titleNormal",htmlContainer:"sw2_normal",confirmButton:"sw2_button",cancelButton:"sw2_button"}},t=>{if(t.isConfirmed){subScene="result",score=saveData.result.score,hiMemory=saveData.result.hi,soundOp=saveData.result.sound,nextScene="game",eraseTitle(),resultDisplay(),shift=0,finishTime=0,finishX=703.5,resultSave(),save(),Remove(div_finish),shareResult=!0,subScene="result",hiSound=!0,setTimeout(()=>{soundName[5]="result"},500);for(let t=0;t<snsMax;t++)div_result2.appendChild(div_SNS_button[t]),SNS_button[t].use=!1,SNS_button[t].y="87%";snsButtonDisplay(),UI_button[1].use=!1,UI_button[2].use=!1,div_result2.appendChild(div_UI_button[1]),div_result2.appendChild(div_UI_button[2]),resultOpacity=0,resultX=150}else saveData.result.on=!1,save(),nextScene="game",shift=0,finishTime=0,finishX=703.5})}function eraseAlert(){soundName[0]="confirm";let n=0,o=null,i=(etc=3,document.createElement("div"));sw2({title:Rb("データ[消去(しょうきょ)][確認(かくにん)]"),html:Rb('[自己(じこ)]ベストデータを[消去(しょうきょ)]しますか？<br><span style = "color: #FF5555; font-weight: bold">※[一度(いちど)][消去(しょうきょ)]したデータは、[元(もと)]に[戻(もど)]せません！</span>'),showCancelButton:!0,confirmButtonText:Rb("[消去(しょうきょ)]する"),cancelButtonText:"やめる",confirmButtonColor:"#FF4274",cancelButtonColor:"#257EC9",allowOutsideClick:!1,reverseButtons:!0,didOpen:()=>{let t=Swal.getConfirmButton(),e=(t&&(t.disabled=!0,t.style.opacity=.1),0);Swal.getPopup().appendChild(i),i.style.position="absolute",i.style.left="5%",i.style.top="100%",i.style.overflow="hidden",i.style.backgroundColor="#FF0000",i.style.transform="translate(0%, -100%) scaleX(0%)",i.style.transformOrigin="center left",i.style.width="90%",i.style.height="0.3em",o=setInterval(()=>{n++,100<(e=n/(8*fps)*100)&&(e=100),i.style.transform="translate(0%, -100%) scaleX("+e+"%)",t&&n>=8*fps&&(t.disabled=!1,t.style.opacity=1,null!==o)&&(clearInterval(o),o=null)},fps2)},customClass:{popup:"sw2_pop",title:"sw2_titleNormal",htmlContainer:"sw2_normal",confirmButton:"sw2_button",cancelButton:"sw2_button"}},t=>{var e=Swal.getPopup();null!==o&&(clearInterval(o),o=null,i.remove()),t.isConfirmed?(e.classList.remove("animate__backOutRight"),e.classList.add("animate__rotateOut"),soundName[5]="allClear",eraseData(),white.m=1,white.opacity=1):soundName[0]="back"},0)}saveData.result.on?(nextScene="check",console.log(saveData.result.time),console.log((new Date).getTime()),(new Date).getTime()-saveData.result.time<=18e5||(saveData.result.on=!1,save(),nextScene="game")):nextScene="game";let img_panel=document.createElement("img"),img_pause=(img_panel.src="image/panel/base.png",document.createElement("img")),img_finish=(img_pause.src="image/pause.png",document.createElement("img")),img_char=(img_finish.src="image/finish.png",[]);for(let e=0;e<allType;e++){img_char[e]=[];for(let t=0;t<panelSprite[e];t++)img_char[e][t]=document.createElement("img"),img_char[e][t].src="image/panel/"+e+"_"+t+".png"}let img_handButton=[];for(let t=0;t<3;t++)img_handButton[t]=document.createElement("img"),img_handButton[t].src="image/handButton"+t+".png";let img_end_button=[];for(let t=0;t<2;t++)img_end_button[t]=document.createElement("img"),img_end_button[t].src="image/end_button"+t+".png";let img_howTo=[];for(let t=0;t<2;t++)img_howTo[t]=document.createElement("img"),img_howTo[t].src="image/howTo"+t+".png";let img_SNS=[];for(let t=0;t<7;t++)img_SNS[t]=document.createElement("img"),img_SNS[t].src="sys/shareButton"+t+".webp";let img_shareCopy=document.createElement("img"),img_logo=(img_shareCopy.src="sys/shareButton0c.webp",[]);for(let t=0;t<4;t++)img_logo[t]=document.createElement("img"),img_logo[t].src="image/logoMini"+t+".png";let img_startButton=document.createElement("img"),img_howToButton=(img_startButton.src="image/startButton.png",document.createElement("img")),img_sound_button=(img_howToButton.src="image/howToButton.png",document.createElement("img")),img_left_button=(img_sound_button.src="image/sound_button.png",document.createElement("img")),img_right_button=(img_left_button.src="image/left_button.png",document.createElement("img")),img_etcButton=(img_right_button.src="image/right_button.png",document.createElement("img")),img_bg=(img_etcButton.src="image/etcButton.png",document.createElement("img")),img_panelOK=(img_bg.src="image/bg.webp",document.createElement("img")),img_panelMiss=(img_panelOK.src="image/panel/OK.png",document.createElement("img")),img_homePageButton=(img_panelMiss.src="image/panel/miss.png",document.createElement("img")),img_creditButton=(img_homePageButton.src="image/homePageButton.png",document.createElement("img")),img_licenseButton=(img_creditButton.src="image/creditButton.png",document.createElement("img")),img_clearButton=(img_licenseButton.src="image/licenseButton.png",document.createElement("img")),img_backButton=(img_clearButton.src="image/clearButton.png",document.createElement("img"));img_backButton.src="image/backButton.png";